# νΌμ‚¬λ“ ν¨ν„΄(Facade Pattern)

![image-20220713111741518](images/image-20220713111741518.png)

***νΌμ‚¬λ“ ν¨ν„΄***

μΈν„°νμ΄μ¤λ¥Ό λ‹¨μν•κ² λ°”κΎΈλ ¤κ³  μΈν„°νμ΄μ¤λ¥Ό λ³€κ²½ν•λ” ν¨ν„΄μ΄λ‹¤. ν•λ‚ μ΄μƒμ ν΄λμ¤ μΈν„°νμ΄μ¤λ¥Ό κΉ”λ”ν•λ©΄μ„λ„ ν¨κ³Όμ μΈ νΌμ‚¬λ“λ΅ λ®μ–΄μ¤€λ‹¤.

> **νΌμ‚¬λ“**
>
> κ²‰λ¨μ–‘μ΄λ‚ μ™Έκ΄€μ΄λΌλ” λ»



## μ‹¤μµ μ½”λ“

### 1. λ§μ€ κ°€μ „ μ ν’ λ‹¤λ£¨κΈ° (_01_before)

<img src="images/1537268110198415.jpg" alt="νμ½ | μ¤ν€ λ””μ¤μ»¤μ¤" style="zoom:150%;" />

λ„·ν”λ¦­μ¤, ν‹°λΉ™, μ• ν”ν‹°λΉ„ λ“± λ§μ€ OTT(Over The Top media service)κ°€ λ§μ•„μ΅λ‹¤. λ¨λ“  μ»¨ν…μΈ λ¥Ό λ‹¤ μ¦κΈ°κΈ°μ„ν•΄ ν™μ‹μ–΄ν„°λ¥Ό κµ¬μ¶•ν•΄λ³΄μ. 



![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-07-13 α„‹α…©α„α…¥α†« 11.19.59](images/α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-07-13 α„‹α…©α„α…¥α†« 11.19.59.png)

***ν™μ‹μ–΄ν„°λ¥Ό μ„ν• μ‹μ¤ν… ERD***

μ°λ¦¬κ°€ μ›ν•λ” κ²ƒμ€ μ¤νΈλ¦¬λ° ν”λ μ΄μ–΄, ν”„λ΅μ ν„°, μλ™μ¤ν¬λ¦°, μ„λΌμ΄λ“ μν–¥μ€ λ¬Όλ΅  νμ½ κΈ°κ³„κΉμ§€ κ°–μ¶ μ‹μ¤ν…μ΄λ‹¤.



```java
// μν™” λ³΄κΈ°
popper.on();
popper.pop();
lights.dim(10);
screen.down();
projector.on();
projector.wideScreenMode();
amp.on();
amp.setStreamingPlayer(player);
amp.setSurroundSound();
amp.setVolume(5);
player.on();
player.play("Raiders of the Lost Ark");
```

***μν™” λ³΄λ” κ³Όμ •***

μ΄μ  μν™”λ¥Ό λ³΄λ ¤λ©΄ μ„μ™€ κ°™μ€ κ³Όμ •μ„ λ‹¤ μ™Έμ›μ„ μ§„ν–‰ν•΄μ•Όν•λ‹¤.



```java
// μν™” λ„κΈ°
System.out.println("Shutting movie theater down...");
popper.off();
lights.on();
screen.up();
projector.off();
amp.off();
player.stop();
player.off();
```

***μν™” λ„λ” κ³Όμ •***

λ‹¤ λ³΄κ³  λ„λ” κ²ƒλ„ μΌμ΄λ‹¤. ν™ μ‹μ–΄ν„° μ‚¬μ©λ²•μ΄ λ„λ¬΄ λ³µμ΅ν•λ‹¤. μ΄λ¥Ό νΌμ‚¬λ“ ν¨ν„΄μΌλ΅ κ°„λ‹¨ν•κ² μ²λ¦¬ν•΄λ³΄μ.



> **λ””μμΈ μ›μΉ™. μµμ† μ§€μ‹ μ›μΉ™ (λ””λ―Έν„°μ λ²•μΉ™)**
>
> μ§„μ§ μ μΉμ—κ²λ§ μ΄μ•ΌκΈ°ν•΄μ•Όν•λ‹¤.

νΌμ‚¬λ“ μ›μΉ™μ„ μ•μ•„λ³΄κΈ° μ „μ— μƒλ΅μ΄ λ””μμΈ μ›μΉ™μ΄ μ¶”κ°€λλ‹¤. κ°μ²΄ μ‚¬μ΄μ μƒνΈμ‘μ©μ€ λ  μ μμΌλ©΄ μ•„μ£Ό κ°€κΉμ΄ μΉκµ¬ μ‚¬μ΄μ—μ„λ§ ν—μ©ν•λ” νΈμ΄ μΆ‹λ‹¤. μ‹μ¤ν…μ„ λ””μμΈν•  λ• μ–΄λ–¤ κ°μ²΄λ“  κ·Έ κ°μ²΄μ™€ μƒνΈμ‘μ©μ„ ν•λ” ν΄λμ¤μ κ°μμ™€ μƒνΈμ‘μ© λ°©μ‹μ— μ£Όμλ¥Ό κΈ°μΈμ—¬μ•Ό ν•λ‹¤λ” λ»μ΄λ‹¤.

μ΄ μ›μΉ™μ„ λ”°λ¥΄λ©΄ μ—¬λ¬ ν΄λμ¤κ°€ λ³µμ΅ν•κ² μ–½ν€ μμ–΄μ„ μ‹μ¤ν…μ ν• λ¶€λ¶„μ„ λ³€κ²½ν–μ„ λ• λ‹¤λ¥Έ λ¶€λ¶„κΉμ§€ μ¤„μ¤„μ΄ κ³ μ³μ•Όν•λ” μƒν™©μ„ λ―Έλ¦¬ λ°©μ§€ν•  μ μλ‹¤.

> **λ¦¬ν©ν† λ§ μ±…. λ©”μ†λ“ μ²΄μ΄λ‹μ λƒ„μƒ**
>
> - person.getDepartment().getManager()
>
> - person.getManager()
>
> π—£ μΆ…λ―Ό : λ¬Όμ–΄λ³΄μ§€ λ§κ³  μ‹μΌλΌ.



> ![image-20220713112718286](images/image-20220713112718286.png)***νΌμ‚¬λ“ ν¨ν„΄***
>
> μ„λΈμ‹μ¤ν…μ— μλ” μΌλ ¨μ μΈν„°νμ΄μ¤λ¥Ό ν†µν•© μΈν„°νμ΄μ¤λ΅ λ¬¶μ–΄μ¤€λ‹¤. λν• κ³ μμ¤€ μΈν„°νμ΄μ¤λ„ μ •μν•λ―€λ΅ μ„λΈμ‹μ¤ν…μ„ λ” νΈλ¦¬ν•κ² μ‚¬μ©ν•  μ μλ‹¤.

νΌμ‚¬λ“ ν¨ν„΄μ€ μµμ† μ§€μ‹ μ›μΉ™μ„ λ”°λ¥΄λ” ν¨ν„΄μ΄λΌκ³  λ³Ό μ μλ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λΈ μ‹μ¤ν…μ΄ μ„λ΅ κΈ΄λ°€ν•κ² μ—°κ²°λμ§€ μ•κ³ , νΌμ‚¬λ“λ§ μ•κ²λλ‹¤.



![image-20220713122146622](images/image-20220713122146622.png)

***μµμ† μ§€μ‹ μ›μΉ™μ„ μ¤€μν•κ²ν•λ” νΌμ‚¬λ“ ν¨ν„΄***



### 2. νΌμ‚¬λ“λ΅ ν•λ²μ— λ‹¤λ£¨κΈ° (_02_facade_pattern)

```java
public class HomeTheaterFacade {
  
	 // κ°€μ „ μ ν’ ν•„λ“μ™€ μƒμ„±μ μƒλµ
 
   public void watchMovie(String movie) {
      System.out.println("Get ready to watch a movie...");
      popper.on();
      popper.pop();
      lights.dim(10);
      screen.down();
      projector.on();
      projector.wideScreenMode();
      amp.on();
      amp.setStreamingPlayer(player);
      amp.setSurroundSound();
      amp.setVolume(5);
      player.on();
      player.play(movie);
   }
 
 
   public void endMovie() {
      System.out.println("Shutting movie theater down...");
      popper.off();
      lights.on();
      screen.up();
      projector.off();
      amp.off();
      player.stop();
      player.off();
   }
}
```

***HomeTheaterFacade.java***

μ°μ„  νΌμ‚¬λ“μ—μ„ μ„λΈμ‹μ¤ν…μ— μλ” λ¨λ“  κµ¬μ„±μ”μ†μ— μ ‘κ·Όν•  μ μλ„λ΅ κµ¬μ„±ν•μ.



```java
HomeTheaterFacade homeTheater =
      new HomeTheaterFacade(amp, tuner, player,
            projector, screen, lights, popper);

homeTheater.watchMovie("Raiders of the Lost Ark");
homeTheater.endMovie();
```

***νΌμ‚¬λ“ μ‚¬μ© μμ‹***

> 2: μ„λΈμ‹μ¤ν…μ— λ“¤μ–΄κ°€λ” λ¨λ“  κµ¬μ„± μ”μ†λ¥Ό λ§¤κ° λ³€μλ΅ μ „λ‹¬ν•΄μ„ νΌμ‚¬λ“ μΈμ¤ν„΄μ¤ μƒμ„±
>
> 5: λ‹¨μν™”λ μΈν„°νμ΄μ¤λ¥Ό μ¨μ„ μν™”λ¥Ό ν‚¤κ³  λλ‹¤. 

μ΄μ  ν΄λΌμ΄μ–ΈνΈλ” ν™μ‹μ–΄ν„°μ μμ„Έν• λ΅μ§μ„ λ°λΌλ„ λκ³ , μ μΉμΈ νΌμ‚¬λ“μ™€λ§ μ–κΈ°ν•  μ μκ² λμ—λ‹¤.



## μ‚¬μ© μμ‹

### μλ°”μ—μ„μ νΌμ‚¬λ“ ν¨ν„΄

**MailSender**

```java
MailSender mailSender = new JavaMailSenderImpl();
```

μλ°”μ—μ„ λ©”μΌ λ³΄λ‚΄λ” μ„λΈ μ‹μ¤ν…μ„ λ¨λ‘ μ¶”μƒν™” μ‹μΌ°λ‹¤.

### μ¤ν”„λ§μ—μ„μ νΌμ‚¬λ“ ν¨ν„΄

**PlatformTransactionManager**

```java
PlatformTransactionManager manager = new JdbcTransactionManager();
```

> π—£ μΆ…λ―Ό, μ§€ν„ 
>
> : νμ‚¬λ“μ λ€ν‘μ μΈ μλ” Slf4j Logger μ΄λ‹¤. Log4J, LogBack κ°™μ€ λ³µμ΅ν• κµ¬ν„μ²΄λ¥Ό μ¶”μƒν™”ν•΄μ¤€λ‹¤. λ§μ΄ν¬λ΅λ―Έν„°...



## μ¥/λ‹¨μ 

- μ¥μ 
  - μ„λΈμ‹μ¤ν… μμ΅΄μ„±μ„ λ°μ•„μ¤„ μ μλ‹¤.
  - ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λΈμ‹μ¤ν…μ λ¨λ“  κµ¬ν„μ„ μ• ν•„μ” μ—†λ‹¤.
- λ‹¨μ 
  - νΌμ‚¬λ“ μμ²΄κ°€ λ¨λ“  μμ΅΄μ„±μ„ κ°€μ§€κ² λλ‹¤.